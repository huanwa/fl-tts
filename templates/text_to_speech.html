<!DOCTYPE html>
<html>
    <head>
        <!-- Add Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <style>
            /* Center the title and push the form and result down */
            .title {
                text-align: center;
                padding-top: 50px;
                font-family: Arial, sans-serif; /* Use a sans-serif font */
            }
            .form-wrapper, .result-wrapper {
                margin-top: 100px;
                background: rgba(255,255,255,0.3); /* Semi-transparent white */
                backdrop-filter: blur(10px); /* Apply blur */
                border-radius: 25px;
                padding: 50px;
            }
            .form-group label, .result-header {
                font-size: 1rem; /* Make font size the same as label */
            }
            /* Style input and select elements */
            textarea, select, input[type="submit"] {
                border-radius: 10px; /* Round the corners */
                border: none; /* Remove border */
                box-shadow: none; /* Remove box shadow */
            }
            /* Add language selection note */
            .form-group .note {
                font-size: 0.9rem; /* Make font slightly smaller */
                color: gray; /* Make text gray */
            }
            body {
                margin: 0;
                height: 100vh;
                background: linear-gradient(to right, #cddad9, #9db0d0); /* Gradient background */
                overflow: hidden;
            }
            /* Style for loader */
            .loader {
                display: none;
                position: fixed;
                left: 50%;
                top: 50%;
                width: 100px;
                height: 100px;
                transform: translate(-50%, -50%);
                z-index: 9999;
            }
            .btn-download:hover {
                background-color: white; 
                color: #28A745;
            }
        </style>
    </head>
    <body>
        <h1 class="title">Text-to-Speech (TTS) Engine with Over 200 Voices</h1>
        <div class="container">
            <div class="row">
                <div class="col form-wrapper">
                    <form id="myForm">
                        <div class="form-group">
                            <label>Enter Text:</label><br>
                            <textarea class="form-control" name="text" cols="40" rows="5"></textarea><br>
                            <label>Select Language and Voice:</label><br>
                            <p class="note">The selected language must match the text language</p>
                            <select class="form-control" name="language_code">
                                {% for language in languages %}
                                    <option value="{{ language }}">{{ language }}</option>
                                {% endfor %}
                            </select><br>
                        </div>
                        <input type="submit" class="btn btn-primary" value="Submit">
                    </form>
                </div>
                <div class="col result-wrapper">
                    <div id="result">
                        <h3 class="result-header">TTS Result：</h3>
                    </div>
                </div>
            </div>
        </div>
        <!-- Loader -->
        <div class="loader">
            <div class="spinner-border text-primary" role="status">
              <span class="sr-only">Loading...</span>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            $('#myForm').on('submit', function(e) {
              e.preventDefault();
              $('.loader').show();
              $.ajax({
                  url: '/text_to_speech',
                  method: 'POST',
                  data: $(this).serialize(),
                  success: function(response) {
                      var html = '<h3 class="result-header">TTS Result：</h3>' +
                          '<audio controls src="' + response.result_audio_url + '"></audio>' +
                          '<br><a class="btn btn-primary" style="margin-top:30px;" href="' + response.result_audio_url + '" download="tts_output.mp3">Download</a>';
                      $('#result').html(html);
                      $('.loader').hide();
                  },
                  error: function() {
                      $('.loader').hide();
                  }
              });
            });
            </script>
    </body>
</html>
